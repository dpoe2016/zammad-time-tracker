<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Zammad Ticket Dashboard</title>
    <link rel="stylesheet" href="style.css">
    <script src="translations.js"></script>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1 id="dashboardTitle">Zammad Ticket Dashboard</h1>
                <div class="header-actions">
                <div class="filter-container">
                    <label for="viewToggle" id="viewToggleLabel">View:</label>
                    <select id="viewToggle" class="filter-select">
                        <option value="state">State View</option>
                        <option value="agent">Agent View</option>
                    </select>
                </div>
                <div class="filter-container">
                    <label for="userFilter" id="userFilterLabel">User:</label>
                    <select id="userFilter" class="filter-select">
                        <option value="all">All Users</option>
                        <option value="me">My Tickets</option>
                        <!-- Other users will be added dynamically -->
                    </select>
                </div>
                <div class="filter-container">
                    <label for="groupFilter" id="groupFilterLabel">Group:</label>
                    <select id="groupFilter" class="filter-select">
                        <option value="all">All Groups</option>
                        <!-- Group options will be added dynamically -->
                    </select>
                </div>
                <div class="filter-container">
                    <label for="organizationFilter" id="organizationFilterLabel">Organization:</label>
                    <select id="organizationFilter" class="filter-select">
                        <option value="all">All Organizations</option>
                        <!-- Organization options will be added dynamically -->
                    </select>
                </div>
                <div class="filter-container">
                    <label for="priorityFilter" id="priorityFilterLabel">Priority:</label>
                    <select id="priorityFilter" class="filter-select">
                        <option value="all">All Priorities</option>
                        <option value="1">Low</option>
                        <option value="2">Normal</option>
                        <option value="3">High</option>
                        <option value="4">Urgent</option>
                    </select>
                </div>
                <div class="filter-container">
                    <label for="stateFilter" id="stateFilterLabel">State:</label>
                    <select id="stateFilter" class="filter-select">
                        <option value="all">All States</option>
                        <option value="open">Open</option>
                        <option value="progress">In Progress</option>
                        <option value="waiting">Waiting</option>
                        <option value="closed">Closed</option>
                    </select>
                </div>
                <div class="filter-container" id="columnVisibilityContainer" style="display: none;">
                    <label for="columnVisibilityBtn" id="columnVisibilityLabel">Spalten:</label>
                    <button id="columnVisibilityBtn" class="btn btn-secondary" title="Versteckte Spalten anzeigen">
                        <span id="columnVisibilityText">Spalten einblenden</span>
                    </button>
                </div>
                <button id="refreshBtn" class="btn btn-secondary">
                    <span class="refresh-icon">â†»</span> <span id="refreshBtnText">Refresh</span>
                </button>
                <button id="backToPopupBtn" class="btn btn-primary"><span id="backBtnText">Back to Popup</span></button>
            </div>
        </div>

        <div id="errorContainer" style="display: none;" class="error-message"></div>

        <div id="loadingContainer" class="loading"><span id="loadingText">Loading tickets...</span></div>

        <div id="dashboardContainer" class="dashboard" style="display: none;">
            <!-- Open Tickets Column -->
            <div class="ticket-column">
                <div class="column-header">
                    <span id="openColumnTitle">Open</span>
                    <span class="count" id="openCount">0</span>
                </div>
                <div class="ticket-list" id="openTickets"></div>
            </div>

            <!-- In Progress Tickets Column -->
            <div class="ticket-column">
                <div class="column-header">
                    <span id="progressColumnTitle">In Progress</span>
                    <span class="count" id="progressCount">0</span>
                </div>
                <div class="ticket-list" id="progressTickets"></div>
            </div>

            <!-- Waiting Tickets Column -->
            <div class="ticket-column">
                <div class="column-header">
                    <span id="waitingColumnTitle">Waiting</span>
                    <span class="count" id="waitingCount">0</span>
                </div>
                <div class="ticket-list" id="waitingTickets"></div>
            </div>

            <!-- Closed Tickets Column -->
            <div class="ticket-column">
                <div class="column-header">
                    <span id="closedColumnTitle">Closed</span>
                    <span class="count" id="closedCount">0</span>
                </div>
                <div class="ticket-list" id="closedTickets"></div>
            </div>
        </div>
    </div>

    <!-- Scripts -->
    <script src="utilities.js"></script>
    <script src="logger.js"></script>
    <script src="storage.js"></script>
    <script src="api.js"></script>
    <script src="dashboard.js"></script>
</body>
</html>
